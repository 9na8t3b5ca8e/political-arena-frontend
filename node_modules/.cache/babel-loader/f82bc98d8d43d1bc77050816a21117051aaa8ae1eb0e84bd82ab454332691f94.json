{"ast":null,"code":"import _objectSpread from\"/workspaces/political-arena-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{Users,Vote,DollarSign,TrendingUp,Trophy,Map,User,Globe,Clock,Star,AlertCircle,Edit,Eye,Timer,Target,BarChart2,Briefcase}from'lucide-react';import{stateData,allStates}from'./state-data';// CORRECTED IMPORT\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL='https://political-arena-backend.onrender.com/api';// Changed for production\nconst apiCall=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=localStorage.getItem('authToken');const config=_objectSpread({headers:_objectSpread({'Content-Type':'application/json'},token&&{'Authorization':\"Bearer \".concat(token)})},options);try{const response=await fetch(\"\".concat(API_BASE_URL).concat(endpoint),config);const data=await response.json();if(!response.ok){const errorMsg=data.errors?data.errors[0].msg:data.error;throw new Error(errorMsg||'API request failed');}return data;}catch(error){console.error('API Error:',error.message);throw error;}};function PoliticalGame(){const[gameState,setGameState]=useState('login');const[currentUser,setCurrentUser]=useState(null);const[activeElections,setActiveElections]=useState([]);const[selectedElection,setSelectedElection]=useState(null);const[pollingData,setPollingData]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[loginForm,setLoginForm]=useState({username:'',password:''});const[registerForm,setRegisterForm]=useState({username:'',email:'',password:'',confirmPassword:'',firstName:'',lastName:''});// This data is now imported correctly above\nconst stanceScale=[{value:1,label:'Far Left'},{value:2,label:'Left'},{value:3,label:'Center-Left'},{value:4,label:'Moderate'},{value:5,label:'Center-Right'},{value:6,label:'Right'},{value:7,label:'Far Right'}];const loadUserProfile=useCallback(async()=>{try{setLoading(true);const profile=await apiCall('/auth/profile');setCurrentUser(profile);if(profile.party&&profile.home_state){setGameState('lobby');loadLobbyData();}else{setGameState('profile');}}catch(error){localStorage.removeItem('authToken');setGameState('login');}finally{setLoading(false);}},[]);const loadLobbyData=async()=>{try{const[elections]=await Promise.all([apiCall('/elections')]);setActiveElections(elections);}catch(error){setError('Failed to load game data');}};useEffect(()=>{const token=localStorage.getItem('authToken');if(token){loadUserProfile();}else{setLoading(false);}},[loadUserProfile]);// Auto-refresh data\nuseEffect(()=>{if(gameState==='lobby'){const interval=setInterval(()=>{loadLobbyData();},30000);return()=>clearInterval(interval);}},[gameState]);// App.js\nconst handleAuth=async(action,form)=>{try{setLoading(true);setError('');if(action==='register'&&form.password!==form.confirmPassword){throw new Error(\"Passwords do not match.\");}const response=await apiCall(\"/auth/\".concat(action),{method:'POST',body:JSON.stringify(form)});localStorage.setItem('authToken',response.token);await loadUserProfile();}catch(error){// This improved catch block will now display the specific error\nsetError(error.message);}finally{setLoading(false);}};const updateProfile=async updateData=>{try{setCurrentUser(prev=>_objectSpread(_objectSpread({},prev),updateData));await apiCall('/auth/profile',{method:'PUT',body:JSON.stringify(updateData)});}catch(err){setError(err.message);}};const handleFundraise=async type=>{try{setLoading(true);setError('');// CORRECTED LINE: The URL is now '/actions/fundraise'\nconst res=await apiCall('/actions/fundraise',{method:'POST',body:JSON.stringify({type})});setCurrentUser(prev=>_objectSpread(_objectSpread({},prev),res.newStats));}catch(err){setError(err.message);}finally{setLoading(false);}};const handleAttackAd=async targetUserId=>{try{setLoading(true);setError('');const res=await apiCall('/actions/attack',{method:'POST',body:JSON.stringify({targetUserId})});setCurrentUser(prev=>_objectSpread(_objectSpread({},prev),{},{campaign_funds:res.newFunds,action_points:res.newAP}));}catch(err){setError(err.message);}finally{setLoading(false);}};const handleViewElection=async electionId=>{if(selectedElection&&selectedElection.id===electionId){setSelectedElection(null);// Toggle off\nreturn;}try{setLoading(true);const electionDetails=await apiCall(\"/elections/\".concat(electionId));setSelectedElection(electionDetails);setPollingData([]);// Reset polling data\n}catch(err){setError(err.message);}finally{setLoading(false);}};const handleViewPolling=async electionId=>{try{setLoading(true);const polling=await apiCall(\"/elections/\".concat(electionId,\"/polling\"));setPollingData(polling);}catch(err){setError(err.message);}finally{setLoading(false);}};const logout=()=>{localStorage.removeItem('authToken');setCurrentUser(null);setGameState('login');setError('');};if(loading&&!currentUser)return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-900 flex items-center justify-center text-white\",children:\"Loading...\"});return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-900 text-white p-4 font-sans\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[currentUser&&gameState!=='login'&&gameState!=='register'&&/*#__PURE__*/_jsxs(\"header\",{className:\"bg-gray-800 p-4 rounded-lg mb-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-blue-400\",children:\"Political Arena\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:currentUser.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{title:\"Approval Rating\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"inline-block\",size:18}),\" \",currentUser.approval_rating,\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{title:\"Campaign Funds\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"inline-block\",size:18}),\" $\",currentUser.campaign_funds.toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{title:\"Political Capital\",children:[/*#__PURE__*/_jsx(Briefcase,{className:\"inline-block\",size:18}),\" \",currentUser.political_capital]}),/*#__PURE__*/_jsxs(\"div\",{title:\"Action Points\",children:[/*#__PURE__*/_jsx(Timer,{className:\"inline-block\",size:18}),\" \",currentUser.action_points]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-600 px-3 py-1 rounded hover:bg-red-700\",children:\"Logout\"})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-500/20 text-red-400 p-3 rounded-lg mb-4\",onClick:()=>setError(''),children:[\"Error: \",error]}),gameState==='login'&&/*#__PURE__*/_jsx(AuthScreen,{title:\"Login\",form:loginForm,setForm:setLoginForm,action:\"login\",handleAuth:handleAuth,setGameState:setGameState}),gameState==='register'&&/*#__PURE__*/_jsx(AuthScreen,{title:\"Register\",form:registerForm,setForm:setRegisterForm,action:\"register\",handleAuth:handleAuth,setGameState:setGameState}),gameState==='profile'&&/*#__PURE__*/_jsx(ProfileSetup,{currentUser:currentUser,updateProfile:updateProfile,allStates:allStates,stanceScale:stanceScale,setGameState:setGameState}),gameState==='lobby'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 space-y-4\",children:[/*#__PURE__*/_jsx(ElectionsList,{elections:activeElections,onSelect:handleViewElection,selectedId:selectedElection===null||selectedElection===void 0?void 0:selectedElection.id}),selectedElection&&/*#__PURE__*/_jsx(ElectionDetails,{election:selectedElection,currentUser:currentUser,onAttack:handleAttackAd,onPolling:handleViewPolling,pollingData:pollingData,setError:setError})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsx(Fundraising,{onFundraise:handleFundraise})})]})]})});}const AuthScreen=_ref=>{let{title,form,setForm,action,handleAuth,setGameState}=_ref;const isRegister=action==='register';const handleChange=e=>setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.name]:e.target.value}));return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto mt-10 p-6 bg-gray-800 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-center\",children:title}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleAuth(action,form);},className:\"space-y-4\",children:[isRegister&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",placeholder:\"First Name\",onChange:handleChange,className:\"p-2 bg-gray-700 rounded w-full\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",placeholder:\"Last Name\",onChange:handleChange,className:\"p-2 bg-gray-700 rounded w-full\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",placeholder:\"Username\",onChange:handleChange,className:\"p-2 bg-gray-700 rounded w-full\"}),isRegister&&/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",placeholder:\"Email\",onChange:handleChange,className:\"p-2 bg-gray-700 rounded w-full\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"Password\",onChange:handleChange,className:\"p-2 bg-gray-700 rounded w-full\"}),isRegister&&/*#__PURE__*/_jsx(\"input\",{name:\"confirmPassword\",type:\"password\",placeholder:\"Confirm Password\",onChange:handleChange,className:\"p-2 bg-gray-700 rounded w-full\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 p-2 rounded hover:bg-blue-700 font-bold\",children:title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-sm\",children:[isRegister?\"Already have an account?\":\"Don't have an account?\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setGameState(isRegister?'login':'register'),className:\"text-blue-400 hover:underline ml-1\",children:isRegister?'Login':'Register'})]})]})]});};const ProfileSetup=_ref2=>{let{currentUser,updateProfile,allStates,stanceScale,setGameState}=_ref2;const getStanceLabel=value=>{var _stanceScale$find;return((_stanceScale$find=stanceScale.find(s=>s.value===value))===null||_stanceScale$find===void 0?void 0:_stanceScale$find.label)||'Moderate';};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto p-6 bg-gray-800 rounded-lg space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Create Your Political Persona\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1 text-sm font-bold\",children:\"Political Party\"}),/*#__PURE__*/_jsxs(\"select\",{value:currentUser.party||'',onChange:e=>updateProfile({party:e.target.value}),className:\"w-full p-2 bg-gray-700 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Party\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Democrat\",children:\"Democrat\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Republican\",children:\"Republican\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Independent\",children:\"Independent\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1 text-sm font-bold\",children:\"Home State\"}),/*#__PURE__*/_jsxs(\"select\",{value:currentUser.home_state||'',onChange:e=>updateProfile({homeState:e.target.value}),className:\"w-full p-2 bg-gray-700 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select State\"}),allStates.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block mb-1 text-sm font-bold\",children:[\"Economic Stance: \",getStanceLabel(currentUser.economic_stance)]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"7\",value:currentUser.economic_stance,onChange:e=>updateProfile({economicStance:parseInt(e.target.value)}),className:\"w-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block mb-1 text-sm font-bold\",children:[\"Social Stance: \",getStanceLabel(currentUser.social_stance)]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"7\",value:currentUser.social_stance,onChange:e=>updateProfile({socialStance:parseInt(e.target.value)}),className:\"w-full\"})]}),/*#__PURE__*/_jsx(\"button\",{disabled:!currentUser.party||!currentUser.home_state,onClick:()=>setGameState('lobby'),className:\"w-full bg-green-600 p-2 rounded font-bold hover:bg-green-700 disabled:bg-gray-500\",children:\"Enter the Arena\"})]});};const ElectionsList=_ref3=>{let{elections,onSelect,selectedId}=_ref3;const formatTime=deadline=>{const diff=new Date(deadline)-new Date();if(diff<0)return\"Closed\";const hours=Math.floor(diff/3600000);const minutes=Math.floor(diff%3600000/60000);return\"\".concat(hours,\"h \").concat(minutes,\"m\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg mb-2\",children:\"Active Elections\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:elections.map(e=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>onSelect(e.id),className:\"p-3 rounded-lg cursor-pointer \".concat(selectedId===e.id?'bg-blue-500/30':'bg-gray-700/50 hover:bg-gray-700'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[e.office,\", \",e.state]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 rounded-full text-xs font-semibold \".concat(e.type==='primary'?'bg-yellow-500/20 text-yellow-400':'bg-green-500/20 text-green-400'),children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400 mt-1\",children:[\"Filing Closes: \",formatTime(e.filing_deadline)]})]},e.id))})]});};const ElectionDetails=_ref4=>{let{election,currentUser,onAttack,onPolling,pollingData,setError}=_ref4;const[isFiling,setIsFiling]=useState(false);const userIsCandidate=election.candidates.some(c=>c.user_id===currentUser.id);const handleFile=async()=>{setIsFiling(true);setError('');try{await apiCall(\"/elections/\".concat(election.id,\"/file\"),{method:'POST'});// TODO: Refresh data after filing\n}catch(err){setError(err.message);}finally{setIsFiling(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-bold text-lg mb-2\",children:[election.office,\", \",election.state,\" - Details\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Status:\"}),\" \",election.status]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700/50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-bold mb-2\",children:[\"Candidates (\",election.candidates.length,\")\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:election.candidates.map(c=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[c.first_name,\" \",c.last_name,\" (\",c.username,\") - \",c.party]}),currentUser.id!==c.user_id&&election.status==='campaign_active'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onAttack(c.user_id),className:\"text-xs bg-red-500/50 px-2 py-1 rounded hover:bg-red-500/80\",children:[/*#__PURE__*/_jsx(Target,{size:14,className:\"inline\"}),\" Attack\"]})]},c.user_id))})]}),pollingData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700/50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold mb-2\",children:\"Latest Polling\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1\",children:pollingData.map(p=>/*#__PURE__*/_jsxs(\"li\",{children:[p.username,\": \",p.percentage,\"%\"]},p.user_id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[election.status==='accepting_candidates'&&!userIsCandidate&&/*#__PURE__*/_jsx(\"button\",{onClick:handleFile,disabled:isFiling,className:\"bg-green-600 px-3 py-1 rounded hover:bg-green-700 disabled:bg-gray-500\",children:isFiling?'Filing...':'File for Election'}),election.status==='campaign_active'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onPolling(election.id),className:\"bg-blue-600 px-3 py-1 rounded hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(BarChart2,{size:16,className:\"inline\"}),\" View Polling\"]})]})]})]});};const Fundraising=_ref5=>{let{onFundraise}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg mb-2\",children:\"Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onFundraise('grassroots'),className:\"w-full text-left p-3 rounded-lg bg-blue-500/20 hover:bg-blue-500/30\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold\",children:\"Grassroots Fundraising\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-300\",children:\"+$2,500, +1% Approval. Costs 15 AP.\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onFundraise('major_donor'),className:\"w-full text-left p-3 rounded-lg bg-purple-500/20 hover:bg-purple-500/30\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold\",children:\"Meet Major Donors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-300\",children:\"+$15,000, -2% Approval. Costs 25 AP. (Req: 40% AR)\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onFundraise('pac'),className:\"w-full text-left p-3 rounded-lg bg-yellow-500/20 hover:bg-yellow-500/30\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold\",children:\"Seek PAC Contribution\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-300\",children:\"+$25,000, -5% Approval. Costs 5 AP & 5 PC. (Req: 10 PC)\"})]})]})]});};export default PoliticalGame;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Users","Vote","DollarSign","TrendingUp","Trophy","Map","User","Globe","Clock","Star","AlertCircle","Edit","Eye","Timer","Target","BarChart2","Briefcase","stateData","allStates","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","apiCall","endpoint","options","arguments","length","undefined","token","localStorage","getItem","config","_objectSpread","headers","concat","response","fetch","data","json","ok","errorMsg","errors","msg","error","Error","console","message","PoliticalGame","gameState","setGameState","currentUser","setCurrentUser","activeElections","setActiveElections","selectedElection","setSelectedElection","pollingData","setPollingData","loading","setLoading","setError","loginForm","setLoginForm","username","password","registerForm","setRegisterForm","email","confirmPassword","firstName","lastName","stanceScale","value","label","loadUserProfile","profile","party","home_state","loadLobbyData","removeItem","elections","Promise","all","interval","setInterval","clearInterval","handleAuth","action","form","method","body","JSON","stringify","setItem","updateProfile","updateData","prev","err","handleFundraise","type","res","newStats","handleAttackAd","targetUserId","campaign_funds","newFunds","action_points","newAP","handleViewElection","electionId","id","electionDetails","handleViewPolling","polling","logout","className","children","title","size","approval_rating","toLocaleString","political_capital","onClick","AuthScreen","setForm","ProfileSetup","ElectionsList","onSelect","selectedId","ElectionDetails","election","onAttack","onPolling","Fundraising","onFundraise","_ref","isRegister","handleChange","e","target","name","onSubmit","preventDefault","placeholder","onChange","_ref2","getStanceLabel","_stanceScale$find","find","s","homeState","map","economic_stance","min","max","economicStance","parseInt","social_stance","socialStance","disabled","_ref3","formatTime","deadline","diff","Date","hours","Math","floor","minutes","office","state","charAt","toUpperCase","slice","filing_deadline","_ref4","isFiling","setIsFiling","userIsCandidate","candidates","some","c","user_id","handleFile","status","first_name","last_name","p","percentage","_ref5"],"sources":["/workspaces/political-arena-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Users, Vote, DollarSign, TrendingUp, Trophy, Map, User, Globe, Clock, Star, AlertCircle, Edit, Eye, Timer, Target, BarChart2, Briefcase } from 'lucide-react';\r\nimport { stateData, allStates } from './state-data'; // CORRECTED IMPORT\r\n\r\nconst API_BASE_URL = 'https://political-arena-backend.onrender.com/api'; // Changed for production\r\n\r\nconst apiCall = async (endpoint, options = {}) => {\r\n  const token = localStorage.getItem('authToken');\r\n  const config = {\r\n    headers: { 'Content-Type': 'application/json', ...(token && { 'Authorization': `Bearer ${token}` }) },\r\n    ...options\r\n  };\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\r\n    const data = await response.json();\r\n    if (!response.ok) {\r\n      const errorMsg = data.errors ? data.errors[0].msg : data.error;\r\n      throw new Error(errorMsg || 'API request failed');\r\n    }\r\n    return data;\r\n  } catch (error) {\r\n    console.error('API Error:', error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nfunction PoliticalGame() {\r\n  const [gameState, setGameState] = useState('login');\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [activeElections, setActiveElections] = useState([]);\r\n  const [selectedElection, setSelectedElection] = useState(null);\r\n  const [pollingData, setPollingData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [loginForm, setLoginForm] = useState({ username: '', password: '' });\r\n  const [registerForm, setRegisterForm] = useState({ username: '', email: '', password: '', confirmPassword: '', firstName: '', lastName: '' });\r\n\r\n  // This data is now imported correctly above\r\n  const stanceScale = [{ value: 1, label: 'Far Left' }, { value: 2, label: 'Left' }, { value: 3, label: 'Center-Left' }, { value: 4, label: 'Moderate' }, { value: 5, label: 'Center-Right' }, { value: 6, label: 'Right' }, { value: 7, label: 'Far Right' }];\r\n\r\n\r\n  const loadUserProfile = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const profile = await apiCall('/auth/profile');\r\n      setCurrentUser(profile);\r\n      if (profile.party && profile.home_state) {\r\n        setGameState('lobby');\r\n        loadLobbyData();\r\n      } else {\r\n        setGameState('profile');\r\n      }\r\n    } catch (error) {\r\n      localStorage.removeItem('authToken');\r\n      setGameState('login');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const loadLobbyData = async () => {\r\n    try {\r\n      const [elections] = await Promise.all([apiCall('/elections')]);\r\n      setActiveElections(elections);\r\n    } catch (error) { setError('Failed to load game data'); }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (token) {\r\n      loadUserProfile();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [loadUserProfile]);\r\n  \r\n  // Auto-refresh data\r\n  useEffect(() => {\r\n    if (gameState === 'lobby') {\r\n      const interval = setInterval(() => { loadLobbyData(); }, 30000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [gameState]);\r\n\r\n  // App.js\r\n\r\n  const handleAuth = async (action, form) => {\r\n    try {\r\n      setLoading(true); \r\n      setError('');\r\n\r\n      if (action === 'register' && form.password !== form.confirmPassword) {\r\n          throw new Error(\"Passwords do not match.\");\r\n      }\r\n\r\n      const response = await apiCall(`/auth/${action}`, { method: 'POST', body: JSON.stringify(form) });\r\n      localStorage.setItem('authToken', response.token);\r\n      await loadUserProfile();\r\n    } catch (error) { \r\n        // This improved catch block will now display the specific error\r\n        setError(error.message); \r\n    } \r\n    finally { \r\n        setLoading(false); \r\n    }\r\n  };\r\n\r\n  const updateProfile = async (updateData) => {\r\n    try {\r\n        setCurrentUser(prev => ({...prev, ...updateData}));\r\n        await apiCall('/auth/profile', { method: 'PUT', body: JSON.stringify(updateData) });\r\n    } catch(err) { setError(err.message) }\r\n  }\r\n\r\n  const handleFundraise = async (type) => {\r\n    try {\r\n        setLoading(true); setError('');\r\n        // CORRECTED LINE: The URL is now '/actions/fundraise'\r\n        const res = await apiCall('/actions/fundraise', { method: 'POST', body: JSON.stringify({type}) });\r\n        setCurrentUser(prev => ({ ...prev, ...res.newStats}));\r\n    } catch (err) { setError(err.message); }\r\n    finally { setLoading(false); }\r\n  }\r\n\r\n  const handleAttackAd = async (targetUserId) => {\r\n    try {\r\n        setLoading(true); setError('');\r\n        const res = await apiCall('/actions/attack', { method: 'POST', body: JSON.stringify({targetUserId}) });\r\n        setCurrentUser(prev => ({...prev, campaign_funds: res.newFunds, action_points: res.newAP }));\r\n    } catch (err) { setError(err.message); }\r\n    finally { setLoading(false); }\r\n  }\r\n\r\n  const handleViewElection = async (electionId) => {\r\n    if (selectedElection && selectedElection.id === electionId) {\r\n        setSelectedElection(null); // Toggle off\r\n        return;\r\n    }\r\n    try {\r\n        setLoading(true);\r\n        const electionDetails = await apiCall(`/elections/${electionId}`);\r\n        setSelectedElection(electionDetails);\r\n        setPollingData([]); // Reset polling data\r\n    } catch (err) { setError(err.message) }\r\n    finally { setLoading(false); }\r\n  }\r\n  \r\n  const handleViewPolling = async (electionId) => {\r\n      try {\r\n          setLoading(true);\r\n          const polling = await apiCall(`/elections/${electionId}/polling`);\r\n          setPollingData(polling);\r\n      } catch(err) { setError(err.message)}\r\n      finally {setLoading(false); }\r\n  }\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('authToken');\r\n    setCurrentUser(null);\r\n    setGameState('login');\r\n    setError('');\r\n  };\r\n\r\n  if(loading && !currentUser) return <div className=\"min-h-screen bg-gray-900 flex items-center justify-center text-white\">Loading...</div>\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-900 text-white p-4 font-sans\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        {currentUser && gameState !== 'login' && gameState !== 'register' && (\r\n             <header className=\"bg-gray-800 p-4 rounded-lg mb-4 flex justify-between items-center\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-blue-400\">Political Arena</h1>\r\n                    <p className=\"text-sm text-gray-400\">{currentUser.username}</p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4\">\r\n                    <div title=\"Approval Rating\"><TrendingUp className=\"inline-block\" size={18}/> {currentUser.approval_rating}%</div>\r\n                    <div title=\"Campaign Funds\"><DollarSign className=\"inline-block\"  size={18}/> ${currentUser.campaign_funds.toLocaleString()}</div>\r\n                    <div title=\"Political Capital\"><Briefcase className=\"inline-block\"  size={18}/> {currentUser.political_capital}</div>\r\n                    <div title=\"Action Points\"><Timer className=\"inline-block\"  size={18}/> {currentUser.action_points}</div>\r\n                    <button onClick={logout} className=\"bg-red-600 px-3 py-1 rounded hover:bg-red-700\">Logout</button>\r\n                </div>\r\n            </header>\r\n        )}\r\n\r\n        {error && <div className=\"bg-red-500/20 text-red-400 p-3 rounded-lg mb-4\" onClick={() => setError('')}>Error: {error}</div>}\r\n\r\n        {/* Auth Screens */}\r\n        {gameState === 'login' && <AuthScreen title=\"Login\" form={loginForm} setForm={setLoginForm} action=\"login\" handleAuth={handleAuth} setGameState={setGameState} />}\r\n        {gameState === 'register' && <AuthScreen title=\"Register\" form={registerForm} setForm={setRegisterForm} action=\"register\" handleAuth={handleAuth} setGameState={setGameState} />}\r\n\r\n        {/* Profile Setup */}\r\n        {gameState === 'profile' && <ProfileSetup currentUser={currentUser} updateProfile={updateProfile} allStates={allStates} stanceScale={stanceScale} setGameState={setGameState}/> }\r\n        \r\n        {/* Main Lobby */}\r\n        {gameState === 'lobby' && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div className=\"md:col-span-2 space-y-4\">\r\n                    <ElectionsList elections={activeElections} onSelect={handleViewElection} selectedId={selectedElection?.id} />\r\n                    {selectedElection && <ElectionDetails election={selectedElection} currentUser={currentUser} onAttack={handleAttackAd} onPolling={handleViewPolling} pollingData={pollingData} setError={setError} />}\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                    <Fundraising onFundraise={handleFundraise} />\r\n                    {/* Placeholder for future components like Players Online */}\r\n                </div>\r\n            </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst AuthScreen = ({ title, form, setForm, action, handleAuth, setGameState }) => {\r\n    const isRegister = action === 'register';\r\n    const handleChange = (e) => setForm(prev => ({ ...prev, [e.target.name]: e.target.value }));\r\n    return (\r\n        <div className=\"max-w-md mx-auto mt-10 p-6 bg-gray-800 rounded-lg\">\r\n            <h2 className=\"text-2xl font-bold mb-6 text-center\">{title}</h2>\r\n            <form onSubmit={(e) => { e.preventDefault(); handleAuth(action, form); }} className=\"space-y-4\">\r\n                {isRegister && (\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <input name=\"firstName\" placeholder=\"First Name\" onChange={handleChange} className=\"p-2 bg-gray-700 rounded w-full\"/>\r\n                        <input name=\"lastName\" placeholder=\"Last Name\" onChange={handleChange} className=\"p-2 bg-gray-700 rounded w-full\"/>\r\n                    </div>\r\n                )}\r\n                <input name=\"username\" placeholder=\"Username\" onChange={handleChange} className=\"p-2 bg-gray-700 rounded w-full\"/>\r\n                {isRegister && <input name=\"email\" type=\"email\" placeholder=\"Email\" onChange={handleChange} className=\"p-2 bg-gray-700 rounded w-full\"/>}\r\n                <input name=\"password\" type=\"password\" placeholder=\"Password\" onChange={handleChange} className=\"p-2 bg-gray-700 rounded w-full\"/>\r\n                {isRegister && <input name=\"confirmPassword\" type=\"password\" placeholder=\"Confirm Password\" onChange={handleChange} className=\"p-2 bg-gray-700 rounded w-full\"/>}\r\n                <button type=\"submit\" className=\"w-full bg-blue-600 p-2 rounded hover:bg-blue-700 font-bold\">{title}</button>\r\n                <p className=\"text-center text-sm\">\r\n                    {isRegister ? \"Already have an account?\" : \"Don't have an account?\"}\r\n                    <button type=\"button\" onClick={() => setGameState(isRegister ? 'login' : 'register')} className=\"text-blue-400 hover:underline ml-1\">\r\n                        {isRegister ? 'Login' : 'Register'}\r\n                    </button>\r\n                </p>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ProfileSetup = ({currentUser, updateProfile, allStates, stanceScale, setGameState}) => {\r\n    const getStanceLabel = (value) => stanceScale.find(s => s.value === value)?.label || 'Moderate';\r\n    return(\r\n        <div className=\"max-w-2xl mx-auto p-6 bg-gray-800 rounded-lg space-y-6\">\r\n            <h2 className=\"text-2xl font-bold\">Create Your Political Persona</h2>\r\n            {/* Party & State */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                    <label className=\"block mb-1 text-sm font-bold\">Political Party</label>\r\n                    <select value={currentUser.party || ''} onChange={(e) => updateProfile({party: e.target.value})} className=\"w-full p-2 bg-gray-700 rounded\">\r\n                        <option value=\"\">Select Party</option>\r\n                        <option value=\"Democrat\">Democrat</option>\r\n                        <option value=\"Republican\">Republican</option>\r\n                        <option value=\"Independent\">Independent</option>\r\n                    </select>\r\n                </div>\r\n                 <div>\r\n                    <label className=\"block mb-1 text-sm font-bold\">Home State</label>\r\n                    <select value={currentUser.home_state || ''} onChange={(e) => updateProfile({homeState: e.target.value})} className=\"w-full p-2 bg-gray-700 rounded\">\r\n                        <option value=\"\">Select State</option>\r\n                        {allStates.map(s => <option key={s} value={s}>{s}</option>)}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            {/* Stances */}\r\n            <div>\r\n                <label className=\"block mb-1 text-sm font-bold\">Economic Stance: {getStanceLabel(currentUser.economic_stance)}</label>\r\n                <input type=\"range\" min=\"1\" max=\"7\" value={currentUser.economic_stance} onChange={e => updateProfile({economicStance: parseInt(e.target.value)})} className=\"w-full\"/>\r\n            </div>\r\n             <div>\r\n                <label className=\"block mb-1 text-sm font-bold\">Social Stance: {getStanceLabel(currentUser.social_stance)}</label>\r\n                <input type=\"range\" min=\"1\" max=\"7\" value={currentUser.social_stance} onChange={e => updateProfile({socialStance: parseInt(e.target.value)})} className=\"w-full\"/>\r\n            </div>\r\n            <button disabled={!currentUser.party || !currentUser.home_state} onClick={() => setGameState('lobby')} className=\"w-full bg-green-600 p-2 rounded font-bold hover:bg-green-700 disabled:bg-gray-500\">Enter the Arena</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ElectionsList = ({ elections, onSelect, selectedId }) => {\r\n    const formatTime = (deadline) => {\r\n        const diff = new Date(deadline) - new Date();\r\n        if (diff < 0) return \"Closed\";\r\n        const hours = Math.floor(diff / 3600000);\r\n        const minutes = Math.floor((diff % 3600000) / 60000);\r\n        return `${hours}h ${minutes}m`;\r\n    };\r\n    return (\r\n        <div className=\"bg-gray-800 p-4 rounded-lg\">\r\n            <h3 className=\"font-bold text-lg mb-2\">Active Elections</h3>\r\n            <div className=\"space-y-2\">\r\n                {elections.map(e => (\r\n                    <div key={e.id} onClick={() => onSelect(e.id)} className={`p-3 rounded-lg cursor-pointer ${selectedId === e.id ? 'bg-blue-500/30' : 'bg-gray-700/50 hover:bg-gray-700'}`}>\r\n                        <div className=\"flex justify-between\">\r\n                            <span className=\"font-bold\">{e.office}, {e.state}</span>\r\n                            <span className={`px-2 py-0.5 rounded-full text-xs font-semibold ${e.type === 'primary' ? 'bg-yellow-500/20 text-yellow-400' : 'bg-green-500/20 text-green-400'}`}>{e.type.charAt(0).toUpperCase() + e.type.slice(1)}</span>\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-400 mt-1\">Filing Closes: {formatTime(e.filing_deadline)}</div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ElectionDetails = ({ election, currentUser, onAttack, onPolling, pollingData, setError }) => {\r\n    const [isFiling, setIsFiling] = useState(false);\r\n    const userIsCandidate = election.candidates.some(c => c.user_id === currentUser.id);\r\n\r\n    const handleFile = async () => {\r\n        setIsFiling(true); setError('');\r\n        try {\r\n            await apiCall(`/elections/${election.id}/file`, {method: 'POST'});\r\n            // TODO: Refresh data after filing\r\n        } catch(err) { setError(err.message); }\r\n        finally{ setIsFiling(false); }\r\n    }\r\n\r\n    return(\r\n        <div className=\"bg-gray-800 p-4 rounded-lg\">\r\n            <h3 className=\"font-bold text-lg mb-2\">{election.office}, {election.state} - Details</h3>\r\n            <div className=\"space-y-3\">\r\n                <p><span className=\"font-semibold\">Status:</span> {election.status}</p>\r\n                 <div className=\"bg-gray-700/50 p-3 rounded-lg\">\r\n                    <h4 className=\"font-bold mb-2\">Candidates ({election.candidates.length})</h4>\r\n                    <ul className=\"space-y-2\">\r\n                        {election.candidates.map(c => (\r\n                            <li key={c.user_id} className=\"flex justify-between items-center\">\r\n                                <span>{c.first_name} {c.last_name} ({c.username}) - {c.party}</span>\r\n                                {currentUser.id !== c.user_id && election.status === 'campaign_active' && (\r\n                                    <button onClick={() => onAttack(c.user_id)} className=\"text-xs bg-red-500/50 px-2 py-1 rounded hover:bg-red-500/80\"><Target size={14} className=\"inline\"/> Attack</button>\r\n                                )}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                 </div>\r\n                 {pollingData.length > 0 && (\r\n                     <div className=\"bg-gray-700/50 p-3 rounded-lg\">\r\n                        <h4 className=\"font-bold mb-2\">Latest Polling</h4>\r\n                        <ul className=\"space-y-1\">\r\n                            {pollingData.map(p => (\r\n                                <li key={p.user_id}>{p.username}: {p.percentage}%</li>\r\n                            ))}\r\n                        </ul>\r\n                     </div>\r\n                 )}\r\n                 <div className=\"flex space-x-2\">\r\n                    {election.status === 'accepting_candidates' && !userIsCandidate && (\r\n                        <button onClick={handleFile} disabled={isFiling} className=\"bg-green-600 px-3 py-1 rounded hover:bg-green-700 disabled:bg-gray-500\">{isFiling ? 'Filing...' : 'File for Election'}</button>\r\n                    )}\r\n                    {election.status === 'campaign_active' && (\r\n                        <button onClick={() => onPolling(election.id)} className=\"bg-blue-600 px-3 py-1 rounded hover:bg-blue-700\"><BarChart2 size={16} className=\"inline\"/> View Polling</button>\r\n                    )}\r\n                 </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Fundraising = ({ onFundraise }) => (\r\n    <div className=\"bg-gray-800 p-4 rounded-lg\">\r\n        <h3 className=\"font-bold text-lg mb-2\">Actions</h3>\r\n        <div className=\"space-y-2\">\r\n            <button onClick={() => onFundraise('grassroots')} className=\"w-full text-left p-3 rounded-lg bg-blue-500/20 hover:bg-blue-500/30\">\r\n                <div className=\"font-bold\">Grassroots Fundraising</div>\r\n                <div className=\"text-sm text-gray-300\">+$2,500, +1% Approval. Costs 15 AP.</div>\r\n            </button>\r\n             <button onClick={() => onFundraise('major_donor')} className=\"w-full text-left p-3 rounded-lg bg-purple-500/20 hover:bg-purple-500/30\">\r\n                <div className=\"font-bold\">Meet Major Donors</div>\r\n                <div className=\"text-sm text-gray-300\">+$15,000, -2% Approval. Costs 25 AP. (Req: 40% AR)</div>\r\n            </button>\r\n             <button onClick={() => onFundraise('pac')} className=\"w-full text-left p-3 rounded-lg bg-yellow-500/20 hover:bg-yellow-500/30\">\r\n                <div className=\"font-bold\">Seek PAC Contribution</div>\r\n                <div className=\"text-sm text-gray-300\">+$25,000, -5% Approval. Costs 5 AP & 5 PC. (Req: 10 PC)</div>\r\n            </button>\r\n        </div>\r\n    </div>\r\n);\r\n\r\n\r\nexport default PoliticalGame;\r\n"],"mappings":"yHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,KAAK,CAAEC,IAAI,CAAEC,UAAU,CAAEC,UAAU,CAAEC,MAAM,CAAEC,GAAG,CAAEC,IAAI,CAAEC,KAAK,CAAEC,KAAK,CAAEC,IAAI,CAAEC,WAAW,CAAEC,IAAI,CAAEC,GAAG,CAAEC,KAAK,CAAEC,MAAM,CAAEC,SAAS,CAAEC,SAAS,KAAQ,cAAc,CACtK,OAASC,SAAS,CAAEC,SAAS,KAAQ,cAAc,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,KAAM,CAAAC,YAAY,CAAG,kDAAkD,CAAE;AAEzE,KAAM,CAAAC,OAAO,CAAG,cAAAA,CAAOC,QAAQ,CAAmB,IAAjB,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CAC3C,KAAM,CAAAG,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAC/C,KAAM,CAAAC,MAAM,CAAAC,aAAA,EACVC,OAAO,CAAAD,aAAA,EAAI,cAAc,CAAE,kBAAkB,EAAMJ,KAAK,EAAI,CAAE,eAAe,WAAAM,MAAA,CAAYN,KAAK,CAAG,CAAC,CAAG,EAClGJ,OAAO,CACX,CACD,GAAI,CACF,KAAM,CAAAW,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAF,MAAA,CAAIb,YAAY,EAAAa,MAAA,CAAGX,QAAQ,EAAIQ,MAAM,CAAC,CAClE,KAAM,CAAAM,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAClC,GAAI,CAACH,QAAQ,CAACI,EAAE,CAAE,CAChB,KAAM,CAAAC,QAAQ,CAAGH,IAAI,CAACI,MAAM,CAAGJ,IAAI,CAACI,MAAM,CAAC,CAAC,CAAC,CAACC,GAAG,CAAGL,IAAI,CAACM,KAAK,CAC9D,KAAM,IAAI,CAAAC,KAAK,CAACJ,QAAQ,EAAI,oBAAoB,CAAC,CACnD,CACA,MAAO,CAAAH,IAAI,CACb,CAAE,MAAOM,KAAK,CAAE,CACdE,OAAO,CAACF,KAAK,CAAC,YAAY,CAAEA,KAAK,CAACG,OAAO,CAAC,CAC1C,KAAM,CAAAH,KAAK,CACb,CACF,CAAC,CAED,QAAS,CAAAI,aAAaA,CAAA,CAAG,CACvB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGtD,QAAQ,CAAC,OAAO,CAAC,CACnD,KAAM,CAACuD,WAAW,CAAEC,cAAc,CAAC,CAAGxD,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACyD,eAAe,CAAEC,kBAAkB,CAAC,CAAG1D,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAAC2D,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG5D,QAAQ,CAAC,IAAI,CAAC,CAC9D,KAAM,CAAC6D,WAAW,CAAEC,cAAc,CAAC,CAAG9D,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAAC+D,OAAO,CAAEC,UAAU,CAAC,CAAGhE,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgD,KAAK,CAAEiB,QAAQ,CAAC,CAAGjE,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkE,SAAS,CAAEC,YAAY,CAAC,CAAGnE,QAAQ,CAAC,CAAEoE,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAC1E,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGvE,QAAQ,CAAC,CAAEoE,QAAQ,CAAE,EAAE,CAAEI,KAAK,CAAE,EAAE,CAAEH,QAAQ,CAAE,EAAE,CAAEI,eAAe,CAAE,EAAE,CAAEC,SAAS,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAE7I;AACA,KAAM,CAAAC,WAAW,CAAG,CAAC,CAAEC,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,UAAW,CAAC,CAAE,CAAED,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,MAAO,CAAC,CAAE,CAAED,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,aAAc,CAAC,CAAE,CAAED,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,UAAW,CAAC,CAAE,CAAED,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,cAAe,CAAC,CAAE,CAAED,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,OAAQ,CAAC,CAAE,CAAED,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,WAAY,CAAC,CAAC,CAG5P,KAAM,CAAAC,eAAe,CAAG7E,WAAW,CAAC,SAAY,CAC9C,GAAI,CACF8D,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAgB,OAAO,CAAG,KAAM,CAAArD,OAAO,CAAC,eAAe,CAAC,CAC9C6B,cAAc,CAACwB,OAAO,CAAC,CACvB,GAAIA,OAAO,CAACC,KAAK,EAAID,OAAO,CAACE,UAAU,CAAE,CACvC5B,YAAY,CAAC,OAAO,CAAC,CACrB6B,aAAa,CAAC,CAAC,CACjB,CAAC,IAAM,CACL7B,YAAY,CAAC,SAAS,CAAC,CACzB,CACF,CAAE,MAAON,KAAK,CAAE,CACdd,YAAY,CAACkD,UAAU,CAAC,WAAW,CAAC,CACpC9B,YAAY,CAAC,OAAO,CAAC,CACvB,CAAC,OAAS,CACRU,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAmB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAACE,SAAS,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CAAC5D,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAC9D+B,kBAAkB,CAAC2B,SAAS,CAAC,CAC/B,CAAE,MAAOrC,KAAK,CAAE,CAAEiB,QAAQ,CAAC,0BAA0B,CAAC,CAAE,CAC1D,CAAC,CAEDhE,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAC/C,GAAIF,KAAK,CAAE,CACT8C,eAAe,CAAC,CAAC,CACnB,CAAC,IAAM,CACLf,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACe,eAAe,CAAC,CAAC,CAErB;AACA9E,SAAS,CAAC,IAAM,CACd,GAAIoD,SAAS,GAAK,OAAO,CAAE,CACzB,KAAM,CAAAmC,QAAQ,CAAGC,WAAW,CAAC,IAAM,CAAEN,aAAa,CAAC,CAAC,CAAE,CAAC,CAAE,KAAK,CAAC,CAC/D,MAAO,IAAMO,aAAa,CAACF,QAAQ,CAAC,CACtC,CACF,CAAC,CAAE,CAACnC,SAAS,CAAC,CAAC,CAEf;AAEA,KAAM,CAAAsC,UAAU,CAAG,KAAAA,CAAOC,MAAM,CAAEC,IAAI,GAAK,CACzC,GAAI,CACF7B,UAAU,CAAC,IAAI,CAAC,CAChBC,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI2B,MAAM,GAAK,UAAU,EAAIC,IAAI,CAACxB,QAAQ,GAAKwB,IAAI,CAACpB,eAAe,CAAE,CACjE,KAAM,IAAI,CAAAxB,KAAK,CAAC,yBAAyB,CAAC,CAC9C,CAEA,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAb,OAAO,UAAAY,MAAA,CAAUqD,MAAM,EAAI,CAAEE,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAE,CAAC,CAAC,CACjG3D,YAAY,CAACgE,OAAO,CAAC,WAAW,CAAE1D,QAAQ,CAACP,KAAK,CAAC,CACjD,KAAM,CAAA8C,eAAe,CAAC,CAAC,CACzB,CAAE,MAAO/B,KAAK,CAAE,CACZ;AACAiB,QAAQ,CAACjB,KAAK,CAACG,OAAO,CAAC,CAC3B,CAAC,OACO,CACJa,UAAU,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAmC,aAAa,CAAG,KAAO,CAAAC,UAAU,EAAK,CAC1C,GAAI,CACA5C,cAAc,CAAC6C,IAAI,EAAAhE,aAAA,CAAAA,aAAA,IAASgE,IAAI,EAAKD,UAAU,CAAE,CAAC,CAClD,KAAM,CAAAzE,OAAO,CAAC,eAAe,CAAE,CAAEmE,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACG,UAAU,CAAE,CAAC,CAAC,CACvF,CAAE,MAAME,GAAG,CAAE,CAAErC,QAAQ,CAACqC,GAAG,CAACnD,OAAO,CAAC,CAAC,CACvC,CAAC,CAED,KAAM,CAAAoD,eAAe,CAAG,KAAO,CAAAC,IAAI,EAAK,CACtC,GAAI,CACAxC,UAAU,CAAC,IAAI,CAAC,CAAEC,QAAQ,CAAC,EAAE,CAAC,CAC9B;AACA,KAAM,CAAAwC,GAAG,CAAG,KAAM,CAAA9E,OAAO,CAAC,oBAAoB,CAAE,CAAEmE,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAACO,IAAI,CAAC,CAAE,CAAC,CAAC,CACjGhD,cAAc,CAAC6C,IAAI,EAAAhE,aAAA,CAAAA,aAAA,IAAUgE,IAAI,EAAKI,GAAG,CAACC,QAAQ,CAAE,CAAC,CACzD,CAAE,MAAOJ,GAAG,CAAE,CAAErC,QAAQ,CAACqC,GAAG,CAACnD,OAAO,CAAC,CAAE,CAAC,OAChC,CAAEa,UAAU,CAAC,KAAK,CAAC,CAAE,CAC/B,CAAC,CAED,KAAM,CAAA2C,cAAc,CAAG,KAAO,CAAAC,YAAY,EAAK,CAC7C,GAAI,CACA5C,UAAU,CAAC,IAAI,CAAC,CAAEC,QAAQ,CAAC,EAAE,CAAC,CAC9B,KAAM,CAAAwC,GAAG,CAAG,KAAM,CAAA9E,OAAO,CAAC,iBAAiB,CAAE,CAAEmE,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAACW,YAAY,CAAC,CAAE,CAAC,CAAC,CACtGpD,cAAc,CAAC6C,IAAI,EAAAhE,aAAA,CAAAA,aAAA,IAASgE,IAAI,MAAEQ,cAAc,CAAEJ,GAAG,CAACK,QAAQ,CAAEC,aAAa,CAAEN,GAAG,CAACO,KAAK,EAAG,CAAC,CAChG,CAAE,MAAOV,GAAG,CAAE,CAAErC,QAAQ,CAACqC,GAAG,CAACnD,OAAO,CAAC,CAAE,CAAC,OAChC,CAAEa,UAAU,CAAC,KAAK,CAAC,CAAE,CAC/B,CAAC,CAED,KAAM,CAAAiD,kBAAkB,CAAG,KAAO,CAAAC,UAAU,EAAK,CAC/C,GAAIvD,gBAAgB,EAAIA,gBAAgB,CAACwD,EAAE,GAAKD,UAAU,CAAE,CACxDtD,mBAAmB,CAAC,IAAI,CAAC,CAAE;AAC3B,OACJ,CACA,GAAI,CACAI,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAoD,eAAe,CAAG,KAAM,CAAAzF,OAAO,eAAAY,MAAA,CAAe2E,UAAU,CAAE,CAAC,CACjEtD,mBAAmB,CAACwD,eAAe,CAAC,CACpCtD,cAAc,CAAC,EAAE,CAAC,CAAE;AACxB,CAAE,MAAOwC,GAAG,CAAE,CAAErC,QAAQ,CAACqC,GAAG,CAACnD,OAAO,CAAC,CAAC,CAAC,OAC/B,CAAEa,UAAU,CAAC,KAAK,CAAC,CAAE,CAC/B,CAAC,CAED,KAAM,CAAAqD,iBAAiB,CAAG,KAAO,CAAAH,UAAU,EAAK,CAC5C,GAAI,CACAlD,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAsD,OAAO,CAAG,KAAM,CAAA3F,OAAO,eAAAY,MAAA,CAAe2E,UAAU,YAAU,CAAC,CACjEpD,cAAc,CAACwD,OAAO,CAAC,CAC3B,CAAE,MAAMhB,GAAG,CAAE,CAAErC,QAAQ,CAACqC,GAAG,CAACnD,OAAO,CAAC,EAAC,OAC7B,CAACa,UAAU,CAAC,KAAK,CAAC,CAAE,CAChC,CAAC,CAED,KAAM,CAAAuD,MAAM,CAAGA,CAAA,GAAM,CACnBrF,YAAY,CAACkD,UAAU,CAAC,WAAW,CAAC,CACpC5B,cAAc,CAAC,IAAI,CAAC,CACpBF,YAAY,CAAC,OAAO,CAAC,CACrBW,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAED,GAAGF,OAAO,EAAI,CAACR,WAAW,CAAE,mBAAOhC,IAAA,QAAKiG,SAAS,CAAC,sEAAsE,CAAAC,QAAA,CAAC,YAAU,CAAK,CAAC,CAEzI,mBACElG,IAAA,QAAKiG,SAAS,CAAC,mDAAmD,CAAAC,QAAA,cAChEhG,KAAA,QAAK+F,SAAS,CAAC,mBAAmB,CAAAC,QAAA,EAE/BlE,WAAW,EAAIF,SAAS,GAAK,OAAO,EAAIA,SAAS,GAAK,UAAU,eAC5D5B,KAAA,WAAQ+F,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAClFhG,KAAA,QAAAgG,QAAA,eACIlG,IAAA,OAAIiG,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cACrElG,IAAA,MAAGiG,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAElE,WAAW,CAACa,QAAQ,CAAI,CAAC,EAC9D,CAAC,cACN3C,KAAA,QAAK+F,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eACxChG,KAAA,QAAKiG,KAAK,CAAC,iBAAiB,CAAAD,QAAA,eAAClG,IAAA,CAACjB,UAAU,EAACkH,SAAS,CAAC,cAAc,CAACG,IAAI,CAAE,EAAG,CAAC,CAAC,IAAC,CAACpE,WAAW,CAACqE,eAAe,CAAC,GAAC,EAAK,CAAC,cAClHnG,KAAA,QAAKiG,KAAK,CAAC,gBAAgB,CAAAD,QAAA,eAAClG,IAAA,CAAClB,UAAU,EAACmH,SAAS,CAAC,cAAc,CAAEG,IAAI,CAAE,EAAG,CAAC,CAAC,KAAE,CAACpE,WAAW,CAACsD,cAAc,CAACgB,cAAc,CAAC,CAAC,EAAM,CAAC,cAClIpG,KAAA,QAAKiG,KAAK,CAAC,mBAAmB,CAAAD,QAAA,eAAClG,IAAA,CAACJ,SAAS,EAACqG,SAAS,CAAC,cAAc,CAAEG,IAAI,CAAE,EAAG,CAAC,CAAC,IAAC,CAACpE,WAAW,CAACuE,iBAAiB,EAAM,CAAC,cACrHrG,KAAA,QAAKiG,KAAK,CAAC,eAAe,CAAAD,QAAA,eAAClG,IAAA,CAACP,KAAK,EAACwG,SAAS,CAAC,cAAc,CAAEG,IAAI,CAAE,EAAG,CAAC,CAAC,IAAC,CAACpE,WAAW,CAACwD,aAAa,EAAM,CAAC,cACzGxF,IAAA,WAAQwG,OAAO,CAAER,MAAO,CAACC,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAAC,QAAM,CAAQ,CAAC,EACjG,CAAC,EACF,CACX,CAEAzE,KAAK,eAAIvB,KAAA,QAAK+F,SAAS,CAAC,gDAAgD,CAACO,OAAO,CAAEA,CAAA,GAAM9D,QAAQ,CAAC,EAAE,CAAE,CAAAwD,QAAA,EAAC,SAAO,CAACzE,KAAK,EAAM,CAAC,CAG1HK,SAAS,GAAK,OAAO,eAAI9B,IAAA,CAACyG,UAAU,EAACN,KAAK,CAAC,OAAO,CAAC7B,IAAI,CAAE3B,SAAU,CAAC+D,OAAO,CAAE9D,YAAa,CAACyB,MAAM,CAAC,OAAO,CAACD,UAAU,CAAEA,UAAW,CAACrC,YAAY,CAAEA,YAAa,CAAE,CAAC,CAChKD,SAAS,GAAK,UAAU,eAAI9B,IAAA,CAACyG,UAAU,EAACN,KAAK,CAAC,UAAU,CAAC7B,IAAI,CAAEvB,YAAa,CAAC2D,OAAO,CAAE1D,eAAgB,CAACqB,MAAM,CAAC,UAAU,CAACD,UAAU,CAAEA,UAAW,CAACrC,YAAY,CAAEA,YAAa,CAAE,CAAC,CAG/KD,SAAS,GAAK,SAAS,eAAI9B,IAAA,CAAC2G,YAAY,EAAC3E,WAAW,CAAEA,WAAY,CAAC4C,aAAa,CAAEA,aAAc,CAAC9E,SAAS,CAAEA,SAAU,CAACuD,WAAW,CAAEA,WAAY,CAACtB,YAAY,CAAEA,YAAa,CAAC,CAAC,CAG9KD,SAAS,GAAK,OAAO,eAClB5B,KAAA,QAAK+F,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eAClDhG,KAAA,QAAK+F,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACpClG,IAAA,CAAC4G,aAAa,EAAC9C,SAAS,CAAE5B,eAAgB,CAAC2E,QAAQ,CAAEnB,kBAAmB,CAACoB,UAAU,CAAE1E,gBAAgB,SAAhBA,gBAAgB,iBAAhBA,gBAAgB,CAAEwD,EAAG,CAAE,CAAC,CAC5GxD,gBAAgB,eAAIpC,IAAA,CAAC+G,eAAe,EAACC,QAAQ,CAAE5E,gBAAiB,CAACJ,WAAW,CAAEA,WAAY,CAACiF,QAAQ,CAAE7B,cAAe,CAAC8B,SAAS,CAAEpB,iBAAkB,CAACxD,WAAW,CAAEA,WAAY,CAACI,QAAQ,CAAEA,QAAS,CAAE,CAAC,EACnM,CAAC,cACN1C,IAAA,QAAKiG,SAAS,CAAC,WAAW,CAAAC,QAAA,cACtBlG,IAAA,CAACmH,WAAW,EAACC,WAAW,CAAEpC,eAAgB,CAAE,CAAC,CAE5C,CAAC,EACL,CACR,EACE,CAAC,CACH,CAAC,CAEV,CAEA,KAAM,CAAAyB,UAAU,CAAGY,IAAA,EAAgE,IAA/D,CAAElB,KAAK,CAAE7B,IAAI,CAAEoC,OAAO,CAAErC,MAAM,CAAED,UAAU,CAAErC,YAAa,CAAC,CAAAsF,IAAA,CAC1E,KAAM,CAAAC,UAAU,CAAGjD,MAAM,GAAK,UAAU,CACxC,KAAM,CAAAkD,YAAY,CAAIC,CAAC,EAAKd,OAAO,CAAC5B,IAAI,EAAAhE,aAAA,CAAAA,aAAA,IAAUgE,IAAI,MAAE,CAAC0C,CAAC,CAACC,MAAM,CAACC,IAAI,EAAGF,CAAC,CAACC,MAAM,CAACnE,KAAK,EAAG,CAAC,CAC3F,mBACIpD,KAAA,QAAK+F,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAC9DlG,IAAA,OAAIiG,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAEC,KAAK,CAAK,CAAC,cAChEjG,KAAA,SAAMyH,QAAQ,CAAGH,CAAC,EAAK,CAAEA,CAAC,CAACI,cAAc,CAAC,CAAC,CAAExD,UAAU,CAACC,MAAM,CAAEC,IAAI,CAAC,CAAE,CAAE,CAAC2B,SAAS,CAAC,WAAW,CAAAC,QAAA,EAC1FoB,UAAU,eACPpH,KAAA,QAAK+F,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACnClG,IAAA,UAAO0H,IAAI,CAAC,WAAW,CAACG,WAAW,CAAC,YAAY,CAACC,QAAQ,CAAEP,YAAa,CAACtB,SAAS,CAAC,gCAAgC,CAAC,CAAC,cACrHjG,IAAA,UAAO0H,IAAI,CAAC,UAAU,CAACG,WAAW,CAAC,WAAW,CAACC,QAAQ,CAAEP,YAAa,CAACtB,SAAS,CAAC,gCAAgC,CAAC,CAAC,EAClH,CACR,cACDjG,IAAA,UAAO0H,IAAI,CAAC,UAAU,CAACG,WAAW,CAAC,UAAU,CAACC,QAAQ,CAAEP,YAAa,CAACtB,SAAS,CAAC,gCAAgC,CAAC,CAAC,CACjHqB,UAAU,eAAItH,IAAA,UAAO0H,IAAI,CAAC,OAAO,CAACzC,IAAI,CAAC,OAAO,CAAC4C,WAAW,CAAC,OAAO,CAACC,QAAQ,CAAEP,YAAa,CAACtB,SAAS,CAAC,gCAAgC,CAAC,CAAC,cACxIjG,IAAA,UAAO0H,IAAI,CAAC,UAAU,CAACzC,IAAI,CAAC,UAAU,CAAC4C,WAAW,CAAC,UAAU,CAACC,QAAQ,CAAEP,YAAa,CAACtB,SAAS,CAAC,gCAAgC,CAAC,CAAC,CACjIqB,UAAU,eAAItH,IAAA,UAAO0H,IAAI,CAAC,iBAAiB,CAACzC,IAAI,CAAC,UAAU,CAAC4C,WAAW,CAAC,kBAAkB,CAACC,QAAQ,CAAEP,YAAa,CAACtB,SAAS,CAAC,gCAAgC,CAAC,CAAC,cAChKjG,IAAA,WAAQiF,IAAI,CAAC,QAAQ,CAACgB,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CAAEC,KAAK,CAAS,CAAC,cAC7GjG,KAAA,MAAG+F,SAAS,CAAC,qBAAqB,CAAAC,QAAA,EAC7BoB,UAAU,CAAG,0BAA0B,CAAG,wBAAwB,cACnEtH,IAAA,WAAQiF,IAAI,CAAC,QAAQ,CAACuB,OAAO,CAAEA,CAAA,GAAMzE,YAAY,CAACuF,UAAU,CAAG,OAAO,CAAG,UAAU,CAAE,CAACrB,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAC/HoB,UAAU,CAAG,OAAO,CAAG,UAAU,CAC9B,CAAC,EACV,CAAC,EACF,CAAC,EACN,CAAC,CAEd,CAAC,CAED,KAAM,CAAAX,YAAY,CAAGoB,KAAA,EAAwE,IAAvE,CAAC/F,WAAW,CAAE4C,aAAa,CAAE9E,SAAS,CAAEuD,WAAW,CAAEtB,YAAY,CAAC,CAAAgG,KAAA,CACpF,KAAM,CAAAC,cAAc,CAAI1E,KAAK,OAAA2E,iBAAA,OAAK,EAAAA,iBAAA,CAAA5E,WAAW,CAAC6E,IAAI,CAACC,CAAC,EAAIA,CAAC,CAAC7E,KAAK,GAAKA,KAAK,CAAC,UAAA2E,iBAAA,iBAAxCA,iBAAA,CAA0C1E,KAAK,GAAI,UAAU,GAC/F,mBACIrD,KAAA,QAAK+F,SAAS,CAAC,wDAAwD,CAAAC,QAAA,eACnElG,IAAA,OAAIiG,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,+BAA6B,CAAI,CAAC,cAErEhG,KAAA,QAAK+F,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACnChG,KAAA,QAAAgG,QAAA,eACIlG,IAAA,UAAOiG,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAC,iBAAe,CAAO,CAAC,cACvEhG,KAAA,WAAQoD,KAAK,CAAEtB,WAAW,CAAC0B,KAAK,EAAI,EAAG,CAACoE,QAAQ,CAAGN,CAAC,EAAK5C,aAAa,CAAC,CAAClB,KAAK,CAAE8D,CAAC,CAACC,MAAM,CAACnE,KAAK,CAAC,CAAE,CAAC2C,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eACvIlG,IAAA,WAAQsD,KAAK,CAAC,EAAE,CAAA4C,QAAA,CAAC,cAAY,CAAQ,CAAC,cACtClG,IAAA,WAAQsD,KAAK,CAAC,UAAU,CAAA4C,QAAA,CAAC,UAAQ,CAAQ,CAAC,cAC1ClG,IAAA,WAAQsD,KAAK,CAAC,YAAY,CAAA4C,QAAA,CAAC,YAAU,CAAQ,CAAC,cAC9ClG,IAAA,WAAQsD,KAAK,CAAC,aAAa,CAAA4C,QAAA,CAAC,aAAW,CAAQ,CAAC,EAC5C,CAAC,EACR,CAAC,cACLhG,KAAA,QAAAgG,QAAA,eACGlG,IAAA,UAAOiG,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAC,YAAU,CAAO,CAAC,cAClEhG,KAAA,WAAQoD,KAAK,CAAEtB,WAAW,CAAC2B,UAAU,EAAI,EAAG,CAACmE,QAAQ,CAAGN,CAAC,EAAK5C,aAAa,CAAC,CAACwD,SAAS,CAAEZ,CAAC,CAACC,MAAM,CAACnE,KAAK,CAAC,CAAE,CAAC2C,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAChJlG,IAAA,WAAQsD,KAAK,CAAC,EAAE,CAAA4C,QAAA,CAAC,cAAY,CAAQ,CAAC,CACrCpG,SAAS,CAACuI,GAAG,CAACF,CAAC,eAAInI,IAAA,WAAgBsD,KAAK,CAAE6E,CAAE,CAAAjC,QAAA,CAAEiC,CAAC,EAAfA,CAAwB,CAAC,CAAC,EACvD,CAAC,EACR,CAAC,EACL,CAAC,cAENjI,KAAA,QAAAgG,QAAA,eACIhG,KAAA,UAAO+F,SAAS,CAAC,8BAA8B,CAAAC,QAAA,EAAC,mBAAiB,CAAC8B,cAAc,CAAChG,WAAW,CAACsG,eAAe,CAAC,EAAQ,CAAC,cACtHtI,IAAA,UAAOiF,IAAI,CAAC,OAAO,CAACsD,GAAG,CAAC,GAAG,CAACC,GAAG,CAAC,GAAG,CAAClF,KAAK,CAAEtB,WAAW,CAACsG,eAAgB,CAACR,QAAQ,CAAEN,CAAC,EAAI5C,aAAa,CAAC,CAAC6D,cAAc,CAAEC,QAAQ,CAAClB,CAAC,CAACC,MAAM,CAACnE,KAAK,CAAC,CAAC,CAAE,CAAC2C,SAAS,CAAC,QAAQ,CAAC,CAAC,EACrK,CAAC,cACL/F,KAAA,QAAAgG,QAAA,eACGhG,KAAA,UAAO+F,SAAS,CAAC,8BAA8B,CAAAC,QAAA,EAAC,iBAAe,CAAC8B,cAAc,CAAChG,WAAW,CAAC2G,aAAa,CAAC,EAAQ,CAAC,cAClH3I,IAAA,UAAOiF,IAAI,CAAC,OAAO,CAACsD,GAAG,CAAC,GAAG,CAACC,GAAG,CAAC,GAAG,CAAClF,KAAK,CAAEtB,WAAW,CAAC2G,aAAc,CAACb,QAAQ,CAAEN,CAAC,EAAI5C,aAAa,CAAC,CAACgE,YAAY,CAAEF,QAAQ,CAAClB,CAAC,CAACC,MAAM,CAACnE,KAAK,CAAC,CAAC,CAAE,CAAC2C,SAAS,CAAC,QAAQ,CAAC,CAAC,EACjK,CAAC,cACNjG,IAAA,WAAQ6I,QAAQ,CAAE,CAAC7G,WAAW,CAAC0B,KAAK,EAAI,CAAC1B,WAAW,CAAC2B,UAAW,CAAC6C,OAAO,CAAEA,CAAA,GAAMzE,YAAY,CAAC,OAAO,CAAE,CAACkE,SAAS,CAAC,mFAAmF,CAAAC,QAAA,CAAC,iBAAe,CAAQ,CAAC,EAC5N,CAAC,CAEd,CAAC,CAED,KAAM,CAAAU,aAAa,CAAGkC,KAAA,EAAyC,IAAxC,CAAEhF,SAAS,CAAE+C,QAAQ,CAAEC,UAAW,CAAC,CAAAgC,KAAA,CACtD,KAAM,CAAAC,UAAU,CAAIC,QAAQ,EAAK,CAC7B,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,QAAQ,CAAC,CAAG,GAAI,CAAAE,IAAI,CAAC,CAAC,CAC5C,GAAID,IAAI,CAAG,CAAC,CAAE,MAAO,QAAQ,CAC7B,KAAM,CAAAE,KAAK,CAAGC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAG,OAAO,CAAC,CACxC,KAAM,CAAAK,OAAO,CAAGF,IAAI,CAACC,KAAK,CAAEJ,IAAI,CAAG,OAAO,CAAI,KAAK,CAAC,CACpD,SAAAjI,MAAA,CAAUmI,KAAK,OAAAnI,MAAA,CAAKsI,OAAO,MAC/B,CAAC,CACD,mBACIpJ,KAAA,QAAK+F,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACvClG,IAAA,OAAIiG,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAC5DlG,IAAA,QAAKiG,SAAS,CAAC,WAAW,CAAAC,QAAA,CACrBpC,SAAS,CAACuE,GAAG,CAACb,CAAC,eACZtH,KAAA,QAAgBsG,OAAO,CAAEA,CAAA,GAAMK,QAAQ,CAACW,CAAC,CAAC5B,EAAE,CAAE,CAACK,SAAS,kCAAAjF,MAAA,CAAmC8F,UAAU,GAAKU,CAAC,CAAC5B,EAAE,CAAG,gBAAgB,CAAG,kCAAkC,CAAG,CAAAM,QAAA,eACrKhG,KAAA,QAAK+F,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACjChG,KAAA,SAAM+F,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAEsB,CAAC,CAAC+B,MAAM,CAAC,IAAE,CAAC/B,CAAC,CAACgC,KAAK,EAAO,CAAC,cACxDxJ,IAAA,SAAMiG,SAAS,mDAAAjF,MAAA,CAAoDwG,CAAC,CAACvC,IAAI,GAAK,SAAS,CAAG,kCAAkC,CAAG,gCAAgC,CAAG,CAAAiB,QAAA,CAAEsB,CAAC,CAACvC,IAAI,CAACwE,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGlC,CAAC,CAACvC,IAAI,CAAC0E,KAAK,CAAC,CAAC,CAAC,CAAO,CAAC,EAC3N,CAAC,cACNzJ,KAAA,QAAK+F,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,iBAAe,CAAC6C,UAAU,CAACvB,CAAC,CAACoC,eAAe,CAAC,EAAM,CAAC,GAL1FpC,CAAC,CAAC5B,EAMP,CACR,CAAC,CACD,CAAC,EACL,CAAC,CAEd,CAAC,CAED,KAAM,CAAAmB,eAAe,CAAG8C,KAAA,EAA2E,IAA1E,CAAE7C,QAAQ,CAAEhF,WAAW,CAAEiF,QAAQ,CAAEC,SAAS,CAAE5E,WAAW,CAAEI,QAAS,CAAC,CAAAmH,KAAA,CAC1F,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGtL,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAAuL,eAAe,CAAGhD,QAAQ,CAACiD,UAAU,CAACC,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,OAAO,GAAKpI,WAAW,CAAC4D,EAAE,CAAC,CAEnF,KAAM,CAAAyE,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3BN,WAAW,CAAC,IAAI,CAAC,CAAErH,QAAQ,CAAC,EAAE,CAAC,CAC/B,GAAI,CACA,KAAM,CAAAtC,OAAO,eAAAY,MAAA,CAAegG,QAAQ,CAACpB,EAAE,UAAS,CAACrB,MAAM,CAAE,MAAM,CAAC,CAAC,CACjE;AACJ,CAAE,MAAMQ,GAAG,CAAE,CAAErC,QAAQ,CAACqC,GAAG,CAACnD,OAAO,CAAC,CAAE,CAAC,OAChC,CAAEmI,WAAW,CAAC,KAAK,CAAC,CAAE,CACjC,CAAC,CAED,mBACI7J,KAAA,QAAK+F,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACvChG,KAAA,OAAI+F,SAAS,CAAC,wBAAwB,CAAAC,QAAA,EAAEc,QAAQ,CAACuC,MAAM,CAAC,IAAE,CAACvC,QAAQ,CAACwC,KAAK,CAAC,YAAU,EAAI,CAAC,cACzFtJ,KAAA,QAAK+F,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBhG,KAAA,MAAAgG,QAAA,eAAGlG,IAAA,SAAMiG,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,IAAC,CAACc,QAAQ,CAACsD,MAAM,EAAI,CAAC,cACtEpK,KAAA,QAAK+F,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC3ChG,KAAA,OAAI+F,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAAC,cAAY,CAACc,QAAQ,CAACiD,UAAU,CAACzJ,MAAM,CAAC,GAAC,EAAI,CAAC,cAC7ER,IAAA,OAAIiG,SAAS,CAAC,WAAW,CAAAC,QAAA,CACpBc,QAAQ,CAACiD,UAAU,CAAC5B,GAAG,CAAC8B,CAAC,eACtBjK,KAAA,OAAoB+F,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAC7DhG,KAAA,SAAAgG,QAAA,EAAOiE,CAAC,CAACI,UAAU,CAAC,GAAC,CAACJ,CAAC,CAACK,SAAS,CAAC,IAAE,CAACL,CAAC,CAACtH,QAAQ,CAAC,MAAI,CAACsH,CAAC,CAACzG,KAAK,EAAO,CAAC,CACnE1B,WAAW,CAAC4D,EAAE,GAAKuE,CAAC,CAACC,OAAO,EAAIpD,QAAQ,CAACsD,MAAM,GAAK,iBAAiB,eAClEpK,KAAA,WAAQsG,OAAO,CAAEA,CAAA,GAAMS,QAAQ,CAACkD,CAAC,CAACC,OAAO,CAAE,CAACnE,SAAS,CAAC,6DAA6D,CAAAC,QAAA,eAAClG,IAAA,CAACN,MAAM,EAAC0G,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,QAAQ,CAAC,CAAC,UAAO,EAAQ,CAC5K,GAJIkE,CAAC,CAACC,OAKP,CACP,CAAC,CACF,CAAC,EACH,CAAC,CACL9H,WAAW,CAAC9B,MAAM,CAAG,CAAC,eACnBN,KAAA,QAAK+F,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC3ClG,IAAA,OAAIiG,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAClDlG,IAAA,OAAIiG,SAAS,CAAC,WAAW,CAAAC,QAAA,CACpB5D,WAAW,CAAC+F,GAAG,CAACoC,CAAC,eACdvK,KAAA,OAAAgG,QAAA,EAAqBuE,CAAC,CAAC5H,QAAQ,CAAC,IAAE,CAAC4H,CAAC,CAACC,UAAU,CAAC,GAAC,GAAxCD,CAAC,CAACL,OAA0C,CACxD,CAAC,CACF,CAAC,EACH,CACR,cACDlK,KAAA,QAAK+F,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC3Bc,QAAQ,CAACsD,MAAM,GAAK,sBAAsB,EAAI,CAACN,eAAe,eAC3DhK,IAAA,WAAQwG,OAAO,CAAE6D,UAAW,CAACxB,QAAQ,CAAEiB,QAAS,CAAC7D,SAAS,CAAC,wEAAwE,CAAAC,QAAA,CAAE4D,QAAQ,CAAG,WAAW,CAAG,mBAAmB,CAAS,CAC7L,CACA9C,QAAQ,CAACsD,MAAM,GAAK,iBAAiB,eAClCpK,KAAA,WAAQsG,OAAO,CAAEA,CAAA,GAAMU,SAAS,CAACF,QAAQ,CAACpB,EAAE,CAAE,CAACK,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAAClG,IAAA,CAACL,SAAS,EAACyG,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,QAAQ,CAAC,CAAC,gBAAa,EAAQ,CAC5K,EACC,CAAC,EACN,CAAC,EACL,CAAC,CAEd,CAAC,CAED,KAAM,CAAAkB,WAAW,CAAGwD,KAAA,MAAC,CAAEvD,WAAY,CAAC,CAAAuD,KAAA,oBAChCzK,KAAA,QAAK+F,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACvClG,IAAA,OAAIiG,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,cACnDhG,KAAA,QAAK+F,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBhG,KAAA,WAAQsG,OAAO,CAAEA,CAAA,GAAMY,WAAW,CAAC,YAAY,CAAE,CAACnB,SAAS,CAAC,qEAAqE,CAAAC,QAAA,eAC7HlG,IAAA,QAAKiG,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,wBAAsB,CAAK,CAAC,cACvDlG,IAAA,QAAKiG,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,qCAAmC,CAAK,CAAC,EAC5E,CAAC,cACRhG,KAAA,WAAQsG,OAAO,CAAEA,CAAA,GAAMY,WAAW,CAAC,aAAa,CAAE,CAACnB,SAAS,CAAC,yEAAyE,CAAAC,QAAA,eACnIlG,IAAA,QAAKiG,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,mBAAiB,CAAK,CAAC,cAClDlG,IAAA,QAAKiG,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,oDAAkD,CAAK,CAAC,EAC3F,CAAC,cACRhG,KAAA,WAAQsG,OAAO,CAAEA,CAAA,GAAMY,WAAW,CAAC,KAAK,CAAE,CAACnB,SAAS,CAAC,yEAAyE,CAAAC,QAAA,eAC3HlG,IAAA,QAAKiG,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,uBAAqB,CAAK,CAAC,cACtDlG,IAAA,QAAKiG,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,yDAAuD,CAAK,CAAC,EAChG,CAAC,EACR,CAAC,EACL,CAAC,EACT,CAGD,cAAe,CAAArE,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}